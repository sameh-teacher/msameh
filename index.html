
<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>اختبار إلكتروني – التكامل الاقتصادي – 30 درجة – 10 دقائق</title>
<style>
  :root{
    --bg:#0b1324; --card:#ffffff; --accent:#10b981; --accent2:#14b8a6; --muted:#64748b; --danger:#ef4444; --ok:#16a34a;
  }
  *{box-sizing:border-box}
  body{margin:0;background:linear-gradient(135deg,var(--bg),#0f172a);color:#0f172a;font-family:Tahoma, Arial, sans-serif}
  header{padding:22px 16px;background:linear-gradient(90deg,var(--accent),var(--accent2));color:#fff}
  header h1{margin:0;font-size:22px}
  header .sub{opacity:.95;font-size:14px;margin-top:6px}
  .container{max-width:1000px;margin:20px auto;padding:0 14px}
  .card{background:var(--card);border-radius:14px;box-shadow:0 12px 30px rgba(0,0,0,.12);padding:18px;margin:14px 0}
  .q-title{font-weight:700;margin-bottom:8px}
  .options label{display:block;padding:10px 12px;margin:8px 0;border:1px solid #e5e7eb;border-radius:10px;cursor:pointer}
  input[type="text"]{width:100%;padding:10px;border:1px solid #e5e7eb;border-radius:10px}
  .grid2{display:grid;grid-template-columns:1fr 1fr;gap:12px}
  .badge{display:inline-block;background:#f1f5f9;color:#0f172a;padding:3px 8px;border-radius:20px;font-size:12px;margin-inline-start:6px}
  .timer{color:var(--danger);font-weight:700}
  .actions button{background:var(--accent);color:#fff;border:none;border-radius:10px;padding:12px 16px;font-size:16px;cursor:pointer}
  .actions button.secondary{background:#334155}
  .muted{color:var(--muted);font-size:13px}
  .progress{height:8px;background:#e5e7eb;border-radius:6px;overflow:hidden;margin-top:8px}
  .progress-inner{height:100%;width:0;background:linear-gradient(90deg,var(--accent),var(--accent2));transition:width .4s ease}
  footer{color:#cbd5e1;text-align:center;padding:20px 0}
  .result{font-size:18px;font-weight:700;color:#0f172a}
</style>
</head>
<body>
<header>
  <h1>اختبار إلكتروني – التكامل الاقتصادي – 30 درجة – 10 دقائق</h1>
  <div class="sub">زمن الامتحان: <strong>10 دقائق</strong> — الدرجة النهائية: <strong>30</strong> — إعداد: <strong>الأستاذ/ سامح محمد حسن على</strong></div>
</header>

<div class="container">
  <div class="card">
    <div class="grid2">
      <div>
        <label>اسم الطالب</label>
        <input type="text" id="student" placeholder="اكتب اسمك الثلاثي" />
      </div>
      <div>
        <label>الفصل / الشعبة</label>
        <input type="text" id="class" placeholder="مثال: 6/1" />
      </div>
    </div>
    <div class="muted" style="margin-top:10px">
      <span>الوقت المتبقي: <span id="time" class="timer">10:00</span></span>
      <span style="margin-inline-start:14px">أُجيبَ: <span id="answered">0</span>/<span id="total">12</span> <span class="badge" id="progressBadge">0%</span></span>
    </div>
    <div class="progress"><div class="progress-inner" id="bar"></div></div>
  </div>

  <form id="quiz">
    <div class="card">
      <div class="q-title">أولًا: اختيار من متعدد <span class="badge">(6 × 3 = 18)</span></div>
      <div id="mcq"></div>
    </div>

    <div class="card">
      <div class="q-title">ثانيًا: صح أم خطأ <span class="badge">(6 × 2 = 12)</span></div>
      <div id="tf"></div>
    </div>

    <div class="card actions" style="display:flex;gap:10px;flex-wrap:wrap">
      <button type="button" id="submitBtn">إنهاء الاختبار</button>
      <button type="button" id="sendBtn" class="secondary">إرسال النتيجة للمعلم</button>
      <button type="button" id="resetBtn" class="secondary">إعادة تعيين</button>
      <button type="button" id="printBtn" class="secondary">طباعة</button>
    </div>
  </form>

  <div id="out" class="card" style="display:none">
    <div class="result">نتيجة الطالب: <span id="studentNameOut"></span></div>
    <div class="result">درجتك: <span id="score"></span> / 30</div>
    <div class="muted" id="band"></div>
    <div style="margin-top:10px" id="review"></div>
  </div>
</div>

<footer>
  © الأستاذ/ سامح محمد حسن على — نسخة تعليمية (10 دقائق / 30 درجة) — واجهة عربية (RTL)
</footer>

<script>
// ========= Utilities =========
function shuffle(arr){ for(let i=arr.length-1;i>0;i--){ const j=Math.floor(Math.random()*(i+1)); [arr[i],arr[j]]=[arr[j],arr[i]] } return arr }
function $(sel, root=document){ return root.querySelector(sel) }
function $all(sel, root=document){ return Array.from(root.querySelectorAll(sel)) }

// ========= Timer (10 minutes) =========
let total = 10*60; // seconds
const timeEl = document.getElementById('time');
const submitBtn = document.getElementById('submitBtn');
const sendBtn = document.getElementById('sendBtn');
const resetBtn = document.getElementById('resetBtn');
const printBtn = document.getElementById('printBtn');
const quiz = document.getElementById('quiz');
const out = document.getElementById('out');
const scoreEl = document.getElementById('score');
const bandEl = document.getElementById('band');
const review = document.getElementById('review');
const studentIn = document.getElementById('student');
const studentNameOut = document.getElementById('studentNameOut');
const answeredEl = document.getElementById('answered');
const totalEl = document.getElementById('total');
const bar = document.getElementById('bar');
const progressBadge = document.getElementById('progressBadge');

function tick(){
  const m = String(Math.floor(total/60)).padStart(2,'0');
  const s = String(total%60).padStart(2,'0');
  timeEl.textContent = `${m}:${s}`;
  if(total<=0){ submit(); clearInterval(timer); submitBtn.disabled = true; }
  total--;
}
let timer = setInterval(tick,1000); tick();

function uniqueAnsweredCount(){
  const names = new Set();
  $all('input[type=radio]').forEach(r=>{ if(r.checked) names.add(r.name) });
  return names.size;
}
function updateProgress(){
  const answered = uniqueAnsweredCount();
  answeredEl.textContent = answered.toString();
  totalEl.textContent = (6+6).toString();
  const pct = Math.min(100, Math.round(answered/(6+6)*100));
  bar.style.width = pct+'%';
  progressBadge.textContent = pct+'%';
}
quiz.addEventListener('input', updateProgress); updateProgress();

// ========= Questions Data =========
const MCQ = [
  {q:'1) يتحقّق التكامل الاقتصادي العربي عندما تُستغل الموارد في:', opts:[{t:'تحقيق الاكتفاء الذاتي وتنشيط التجارة البينية', ok:true}, {t:'زيادة الاستيراد', ok:false}, {t:'الاعتماد على السوق العالمي', ok:false}]},
  {q:'2) من مقومات التكامل الاقتصادي العربي:', opts:[{t:'اللغة والثقافة والتاريخ المشترك', ok:true}, {t:'ندرة الموارد الطبيعية', ok:false}, {t:'ضعف الكوادر البشرية', ok:false}]},
  {q:'3) من مجالات التكامل الاقتصادي:', opts:[{t:'تبادل المحاصيل والمنتجات الغذائية', ok:true}, {t:'السياحة فقط', ok:false}, {t:'تدريس نفس المناهج', ok:false}]},
  {q:'4) من معوقات التكامل الاقتصادي العربي:', opts:[{t:'الصراعات والاضطرابات الداخلية', ok:true}, {t:'زيادة الاستثمارات المشتركة', ok:false}, {t:'تنشيط التبادل التجاري', ok:false}]},
  {q:'5) من جهود تحقيق التكامل الاقتصادي:', opts:[{t:'إنشاء جامعة الدول العربية عام 1945', ok:true}, {t:'زيادة الرسوم الجمركية', ok:false}, {t:'منع انتقال السلع', ok:false}]},
  {q:'6) اتفاقية منطقة التجارة الحرة العربية الكبرى أُنشئت عام:', opts:[{t:'1997', ok:true}, {t:'1977', ok:false}, {t:'2007', ok:false}]}
];

const TF = [
  {q:'1) تنوّع الموارد الطبيعية من مقومات التكامل الاقتصادي العربي.', ok:true},
  {q:'2) تشابه الإنتاج بين الدول العربية يساعد على زيادة التكامل الاقتصادي.', ok:false},
  {q:'3) زيادة الخدمات والتنمية البشرية ترفع القدرة التنافسية للمنتجات العربية.', ok:true},
  {q:'4) الاعتماد على الاستيراد من الخارج يُعدّ من معوقات التكامل.', ok:true},
  {q:'5) إنشاء مجلس الوحدة الاقتصادية العربية كان سنة 1957.', ok:true},
  {q:'6) التكامل الاقتصادي لا يؤثر على توفير فرص العمل.', ok:false}
];

// ========= Build UI =========
(function build(){
  const mcqHost = document.getElementById('mcq');
  MCQ.forEach((item, idx)=>{
    const box = document.createElement('div'); box.className='options'; box.dataset.points = 3;
    const q = document.createElement('div'); q.className='q'; q.textContent = item.q; box.appendChild(q);
    const ops = shuffle(item.opts.slice());
    ops.forEach((op)=>{
      const lab = document.createElement('label');
      const input = document.createElement('input'); input.type='radio'; input.name=`q${idx+1}`; input.value= op.ok? '1':'0';
      lab.appendChild(input); lab.appendChild(document.createTextNode(' '+op.t));
      box.appendChild(lab);
    });
    mcqHost.appendChild(box);
  });

  const tfHost = document.getElementById('tf');
  TF.forEach((item, idx)=>{
    const box = document.createElement('div'); box.className='options'; box.dataset.points = 2;
    const q = document.createElement('div'); q.className='q'; q.textContent = item.q; box.appendChild(q);
    const pair = shuffle([{t:'صح', val: item.ok? '1':'0'}, {t:'خطأ', val: item.ok? '0':'1'}]);
    pair.forEach((op)=>{
      const lab = document.createElement('label');
      const input = document.createElement('input'); input.type='radio'; input.name=`t${idx+1}`; input.value=op.val;
      lab.appendChild(input); lab.appendChild(document.createTextNode(' '+op.t));
      box.appendChild(lab);
    });
    tfHost.appendChild(box);
  });
})();

// ========= Grading =========
function submit(){
  let score = 0; let reviewItems = [];
  // MCQ (6 × 3)
  $all('#mcq .options').forEach((box, i)=>{
    const pts = parseFloat(box.dataset.points)||3;
    const sel = $('input[type=radio]:checked', box);
    const ok = sel && sel.value==='1';
    if(ok) score += pts;
    reviewItems.push(`سؤال اختيار ${i+1}: ${ok?'✔ صحيح (+3)':'✘ خطأ (0)'}`);
  });
  // TF (6 × 2)
  $all('#tf .options').forEach((box, i)=>{
    const pts = parseFloat(box.dataset.points)||2;
    const sel = $('input[type=radio]:checked', box);
    const ok = sel && sel.value==='1';
    if(ok) score += pts;
    reviewItems.push(`صح/خطأ ${i+1}: ${ok?'✔ صحيح (+2)':'✘ خطأ (0)'}`);
  });

  // Freeze & output
  $all('#quiz input').forEach(el=> el.disabled = true);
  submitBtn.disabled = true; clearInterval(timer);

  studentNameOut.textContent = (studentIn.value || 'طالب بدون اسم');
  out.style.display = 'block';
  scoreEl.textContent = score.toString();

  let band='';
  if(score>=27) band='ممتاز'; else if(score>=24) band='جيد جدًا'; else if(score>=18) band='جيد'; else if(score>=15) band='مقبول'; else band='ضعيف';
  bandEl.textContent = `التقدير: ${band}`;

  review.innerHTML = '<ol style="line-height:1.9">'+reviewItems.map(x=>`<li>${x}</li>`).join('')+'</ol>';
}

// ========= Send mail =========
function sendMail(){
  // Ensure graded first
  submit();
  const name = (studentIn.value||'طالب بدون اسم');
  const klass = (document.getElementById('class').value||'');
  const score = scoreEl.textContent || '0';
  const subject = encodeURIComponent('نتيجة اختبار – '+name);
  const body = `الطالب: ${name}%0D%0Aالفصل: ${klass}%0D%0Aالنتيجة: ${score} / 30%0D%0Aالرابط: ${location.href}`;
  const href = `mailto:samehteba@gmail.com?subject=${subject}&body=${body}`;
  window.location.href = href;
}

submitBtn.addEventListener('click', submit);
sendBtn.addEventListener('click', sendMail);
resetBtn.addEventListener('click', ()=> window.location.reload());
printBtn.addEventListener('click', ()=> window.print());
</script>
</body>
</html>
